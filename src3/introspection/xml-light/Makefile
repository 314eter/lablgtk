# Makefile generated by OCamake 
# http://tech.motion-twin.com
.SUFFIXES : .ml .mli .cmo .cmx .cmi .mll .mly

INSTALLDIR=`ocamlc -where`
CFLAGS=
LFLAGS= -a
LIBS=
OBJS= dtd.cmo xml_parser.cmo xml_lexer.cmo dtd_ops.cmo xmlParser.cmo \
	xml.cmo xml_ops.cmo
GENERATED= xml_lexer.ml xml_parser.ml

all: $(GENERATED) xml-light.cma 
# test.exe doc

opt: xml-light.cmxa
# test_opt.exe

install: all opt
	cp xml-light.cmxa xml-light.a xml-light.cma xml.mli xmlParser.mli dtd.mli xml.cmi xmlParser.cmi dtd.cmi xml.cmx dtd.cmx xmlParser.cmx $(INSTALLDIR)

doc:
	mkdir doc
	ocamldoc -sort -html -d doc xml.mli dtd.mli xmlParser.mli

test.exe: xml-light.cma
	ocamlc xml-light.cma test.ml -o test.exe

test_opt.exe: xml-light.cmxa
	ocamlopt xml-light.cmxa test.ml -o test_opt.exe

xml-light.cma: $(OBJS)
	ocamlc -o xml-light.cma $(LFLAGS) $(LIBS) $(OBJS)

xml-light.cmxa: $(OBJS:.cmo=.cmx)
	ocamlopt -o xml-light.cmxa $(LFLAGS) $(LIBS) $(OBJS:.cmo=.cmx)

clean:
	rm -f xml-light.cma test.exe *.cmo *.cmi xml_parser.ml xml_parser.mli
	rm -f xml_light.lib xml_light.a xml-light.cmxa test_opt.exe *.cmx *.o

wclean:
	-@del xml-light.cma test.exe dtd.cmo dtd.cmi test.cmo test.cmi xml.cmo xml.cmi xmlParser.cmo xmlParser.cmi dtd.cmi xml.cmi xmlParser.cmi xml_lexer.cmi xml_lexer.cmo xml_lexer.ml xml_parser.mli xml_parser.cmi xml_parser.ml xml_parser.cmo 2>NUL
	-@del xml_light.lib xml_light.a xml-light.cmxa test_opt.exe dtd.cmx dtd.obj dtd.o test.cmx test.obj test.o xml.cmx xml.obj xml.o xmlParser.cmx xmlParser.obj xmlParser.o xml_lexer.cmx xml_lexer.obj xml_lexer.o xml_parser.cmx xml_parser.obj xml_parser.o 2>NUL

.depend: $(GENERATED)
	ocamldep *.ml *.mli > .depend

# SUFFIXES
.ml.cmo:
	ocamlc $(CFLAGS) -c $<

.ml.cmx:
	ocamlopt $(CFLAGS) -c $<

.mli.cmi:
	ocamlc $(CFLAGS) -c $<

.mll.ml:
	ocamllex $<

.mly.ml:
	ocamlyacc $<

include .depend
